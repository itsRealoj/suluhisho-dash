_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[34],{itXR:function(e,a,t){"use strict";t.r(a);var n=t("nKUr"),o=t("vJKn"),l=t.n(o),s=t("rg98"),i=t("q1tI"),r=t("Ktyj"),c=t("JZFu"),u=(t("UGp+"),t("AaxA"),t("ATyU")),d=t("20a2"),h=t("KYPV"),j=t("i6E2"),m=t("i4t8"),b=t("mtPR"),f=t("um8N"),x=t("Kg+a"),p=t("A2So"),g=t("2zww"),C=t("UsYt"),O=t("5LSk");function v(){var e=Object(d.useRouter)(),a=Object(i.useState)(!1),t=a[0],o=a[1],j=Object(i.useState)(null),v=(j[0],j[1]),T=Object(i.useState)(null),w=T[0],P=T[1],W=Object(i.useState)(0),D=(W[0],W[1]),N=Object(h.a)({initialValues:{firstname:"",lastname:"",phone:"",email:"",location:"",county:"",subCounty:"",category:"",categoryID:"",nationalID:"",isSP:!0,profession:"",isActive:!0,isAdmin:!1,isClient:!1,isOccupied:!1,position:{},latitude:"",longitude:""},onSubmit:function(e){e.name="".concat(e.firstname," ").concat(e.lastname)}}),_=function(){var a=Object(s.a)(l.a.mark((function a(t){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r.c.collection("users").add(t).then((function(){alert("New user created!")})).then((function(){e.push("users")})).catch((function(e){console.log("could not create User...",e)}));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(i.useEffect)((function(){r.a.onAuthStateChanged(function(){var a=Object(s.a)(l.a.mark((function a(t){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t?o(!0):e.push("../login");case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()),console.log("storage ref: ",c.a.storage().ref())}),[]),t?Object(n.jsx)(u.a.main,{variants:{hidden:{opacity:.5,scale:1.1,y:10},visible:{y:0,opacity:1,scale:1,transition:{delay:0,duration:.5}}},initial:"hidden",animate:"visible",exit:"exit",children:Object(n.jsx)("div",{children:Object(n.jsx)("form",{onSubmit:N.handleSubmit,children:Object(n.jsx)(b.a,{children:Object(n.jsx)(m.a,{xs:12,sm:12,md:8,children:Object(n.jsxs)(p.a,{children:[Object(n.jsx)(g.a,{color:"dark",children:Object(n.jsx)("h4",{className:y.cardTitleWhite,children:"Add A New User"})}),Object(n.jsxs)(C.a,{children:[Object(n.jsxs)(b.a,{children:[Object(n.jsx)(m.a,{xs:12,sm:12,md:6,children:Object(n.jsx)(f.a,{labelText:"First Name:",id:"firstname",name:"firstname",onChange:N.handleChange,value:N.values.firstname,formControlProps:{fullWidth:!0}})}),Object(n.jsx)(m.a,{xs:12,sm:12,md:6,children:Object(n.jsx)(f.a,{labelText:"Last Name:",id:"lastname",name:"lastname",onChange:N.handleChange,value:N.values.lastname,formControlProps:{fullWidth:!0}})}),Object(n.jsx)(m.a,{xs:12,sm:12,md:6,children:Object(n.jsx)(f.a,{labelText:"Email:",id:"email",name:"email",onChange:N.handleChange,value:N.values.email,formControlProps:{fullWidth:!0}})}),Object(n.jsx)(m.a,{xs:12,sm:12,md:6,children:Object(n.jsx)(f.a,{labelText:"Phone:",id:"phone",name:"phone",onChange:N.handleChange,value:N.values.phone,formControlProps:{fullWidth:!0}})}),Object(n.jsx)(m.a,{xs:12,sm:12,md:6,children:Object(n.jsx)(f.a,{id:"county",name:"county",onChange:N.handleChange,value:N.values.county,placeholder:N.values.county,labelText:"County:",formControlProps:{fullWidth:!0}})}),Object(n.jsx)(m.a,{xs:12,sm:12,md:6,children:Object(n.jsx)(f.a,{id:"subCounty",name:"subCounty",onChange:N.handleChange,value:N.values.subCounty,placeholder:N.values.subCounty,labelText:"Sub-County:",formControlProps:{fullWidth:!0}})})]}),Object(n.jsxs)(b.a,{children:[Object(n.jsx)(m.a,{xs:12,sm:12,md:6,children:Object(n.jsx)(f.a,{labelText:"Category:",id:"category",name:"category",onChange:N.handleChange,value:N.values.category,formControlProps:{fullWidth:!0}})}),Object(n.jsx)(m.a,{xs:12,sm:12,md:6,children:Object(n.jsx)(f.a,{labelText:"Category ID:",id:"categoryID",name:"categoryID",onChange:N.handleChange,value:N.values.categoryID,formControlProps:{fullWidth:!0}})}),Object(n.jsx)(m.a,{xs:12,sm:12,md:6,children:Object(n.jsx)(f.a,{id:"nationalID",name:"nationalID",onChange:N.handleChange,value:N.values.nationalID,placeholder:N.values.nationalID,labelText:"National ID or Passport No.",formControlProps:{fullWidth:!0}})}),Object(n.jsx)(m.a,{xs:12,sm:12,md:6,children:Object(n.jsx)(f.a,{id:"profession",name:"profession",onChange:N.handleChange,value:N.values.profession,placeholder:N.values.profession,labelText:"Profession",formControlProps:{fullWidth:!0}})}),Object(n.jsx)(m.a,{xs:12,sm:12,md:6,children:Object(n.jsx)(f.a,{id:"latitude",name:"latitude",onChange:N.handleChange,value:N.values.latitude,placeholder:N.values.latitude,labelText:"Location - Latitude",formControlProps:{fullWidth:!0}})}),Object(n.jsx)(m.a,{xs:12,sm:12,md:6,children:Object(n.jsx)(f.a,{id:"longitude",name:"longitude",onChange:N.handleChange,value:N.values.longitude,placeholder:N.values.longitude,labelText:"Location - Longitude",formControlProps:{fullWidth:!0}})}),Object(n.jsx)(m.a,{xs:12,sm:12,md:6,children:Object(n.jsx)(f.a,{labelText:"Location/Address:",id:"location",name:"location",onChange:N.handleChange,value:N.values.location,formControlProps:{fullWidth:!0}})})]}),Object(n.jsx)(b.a,{children:Object(n.jsx)(m.a,{xs:12,sm:12,md:6,children:Object(n.jsxs)("label",{children:["Choose profile picture",Object(n.jsx)("input",{type:"file",id:"file",onChange:function(e){e.preventDefault(),e.target.files[0]&&P(e.target.files[0])}})]})})})]}),Object(n.jsxs)(O.a,{children:[Object(n.jsx)(x.a,{type:"submit",color:"primary",onClick:function(){var e=w,a=c.a.storage().ref().child("profile_pics/"+e.name).put(e),t=N.values;a.on(c.a.storage.TaskEvent.STATE_CHANGED,(function(e){var a=100*Math.round(e.bytesTransferred/e.totalBytes);D(a)}),(function(e){throw e}),(function(){a.snapshot.ref.getDownloadURL().then((function(e){v(e),t.profileUrl=e,console.log("download url: ",console.log("user data: ",t)),_(t)}))}))},children:"Create User"}),Object(n.jsx)(x.a,{color:"primary",onClick:function(){e.push("users")},children:"exit"})]})]})})})})})}):null}var y={cardTitleWhite:{color:"#FFFFFF",marginTop:"0px",minHeight:"auto",fontWeight:"300",fontFamily:"'Roboto', 'Helvetica', 'Arial', sans-serif",marginBottom:"3px",textDecoration:"none"}};v.layout=j.a,a.default=v},j3C5:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/add-provider",function(){return t("itXR")}])}},[["j3C5",1,0,4,6,19,2,3,5,7,8,9,18,11,24]]]);