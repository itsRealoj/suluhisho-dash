_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[47],{ErPE:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return S}));var a=n("nKUr"),r=n("vJKn"),c=n.n(r),i=n("rg98"),o=n("q1tI"),s=n("Ktyj"),u=n("R/WZ"),l=n("i6E2"),d=n("ATyU"),f=n("wb2y"),h=n("ELmG"),j=n("kKAo"),p=n("Z3vd"),b=n("i4t8"),m=n("mtPR"),v=n("3T+C"),x=n("A2So"),O=n("2zww"),g=n("UsYt"),w=n("0gE4"),y=n("ZPUK"),P=n("20a2"),E=n("H6uU");function S(){var e=Object(u.a)(C)(),t=Object(P.useRouter)(),n=Object(o.useState)([]),r=n[0],l=n[1],S=Object(o.useState)(null),_=S[0],k=S[1],N=Object(o.useState)(0),U=N[0],A=N[1],H=Object(o.useState)(10),T=H[0],F=H[1],W=Object(o.useState)(0),B=W[0],D=W[1],K=Object(o.useState)(!1),R=K[0],I=K[1],z=Object(o.useState)(!1),G=z[0],J=z[1],L=function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],J(!0),s.c.collection("users").orderBy("name").startAfter(_).limit(T).get().then((function(e){e.forEach((function(n){var a=n.data();a.id=n.id,a.isSP&&t.push(a),k(e.docs[e.docs.length-1])}))})).then((function(){J(!1),l(t)})).catch((function(e){console.error(e),J(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],J(!0),s.c.collection("users").orderBy("name").endBefore(_).limit(T).get().then((function(e){e.forEach((function(n){var a=n.data();a.id=n.id,a.isSP&&t.push(a),k(e.docs[e.docs.length-1])}))})).then((function(){J(!1),l(t)})).catch((function(e){console.error(e),J(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:J(!0),t=[],s.c.collection("users").orderBy("name").limit(T).get().then((function(e){e.forEach((function(n){var a=n.data();a.id=n.id,a.isSP&&t.push(a),k(e.docs[e.docs.length-1])}))})).then((function(){J(!1),D(t.length),l(t)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(i.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:J(!1),n=[],s.c.collection("users").limit(T).get().then((function(e){e.forEach((function(e){var a,r=e.data();r.id=e.id,null!==(a=r.name)&&void 0!==a&&a.toLowerCase().includes(t)&&n.push(r)}))})).then((function(){J(!1),l(n)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){Q(),s.a.onAuthStateChanged(function(){var e=Object(i.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n?I(!0):t.push("../login");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),R?Object(a.jsx)(d.a.main,{variants:{hidden:{opacity:.5,scale:1.1,y:10},visible:{y:0,opacity:1,scale:1,transition:{delay:0,duration:.5}}},initial:"hidden",animate:"visible",exit:"exit",children:Object(a.jsx)(m.a,{children:Object(a.jsx)(b.a,{xs:12,sm:12,md:12,children:Object(a.jsxs)(x.a,{children:[Object(a.jsx)(O.a,{children:Object(a.jsxs)(m.a,{children:[Object(a.jsxs)(b.a,{xs:12,sm:12,md:10,children:[Object(a.jsx)("h4",{className:e.cardTitleWhite,children:"Users"}),Object(a.jsx)("p",{className:e.cardCategoryWhite,children:"View and Manage Service Providers."})]}),Object(a.jsx)(b.a,{xs:12,sm:12,md:2,children:Object(a.jsx)(p.a,{variant:"contained",onClick:function(){return t.push("add-provider")},children:"Add Provider"})})]})}),Object(a.jsx)(f.a,{}),G?Object(a.jsx)(E.a,{}):null,Object(a.jsxs)(g.a,{children:[Object(a.jsx)(m.a,{children:Object(a.jsx)(b.a,{xs:12,sm:12,md:6,children:Object(a.jsx)(w.a,{handleSearch:function(e){e.preventDefault();var t=e.target.value.toLowerCase();X(t)}})})}),Object(a.jsx)(j.a,{style:e.root,children:Object(a.jsx)(v.a,{tableHeaderColor:"primary",tableHead:["Name","Phone","NationalID","Email","County","Sub-County","Profile Pic","Action"],tableData:r.map((function(e){return[e.name,e.phone,e.nationalID,e.email,e.county,e.subCounty,e.profileUrl?Object(a.jsxs)("a",{href:e.profileUrl,target:"_blank",children:[" ","view profile"," "]}):"No profile picture available",e.profilePicture,Object(a.jsx)(y.a,{userData:e,fetchUsers:Q})]}))})})]}),Object(a.jsxs)(m.a,{children:[Object(a.jsx)(b.a,{xs:12,sm:12,md:10,container:!0,justify:"center",children:Object(a.jsx)(h.a,{component:"div",count:B,page:U,onPageChange:function(e,t){t>U?L():Z(),A(t)},rowsPerPage:T,onRowsPerPageChange:function(e){F(parseInt(e.target.value,10)),A(0),Q()}})}),Object(a.jsx)(b.a,{xs:12,sm:12,md:2,container:!0})]})]})})})}):null}var C={cardCategoryWhite:{"&,& a,& a:hover,& a:focus":{color:"#434444",margin:"0",fontSize:"14px",marginTop:"0",marginBottom:"0"},"& a,& a:hover,& a:focus":{color:"#FFFFFF"}},cardTitleWhite:{color:"#434444",marginTop:"0px",minHeight:"auto",fontWeight:"500",fontFamily:"'Roboto', 'Helvetica', 'Arial', sans-serif",marginBottom:"3px",textDecoration:"none","& small":{color:"#777",fontSize:"65%",fontWeight:"400",lineHeight:"1"}},pagination:{padding:"10px"}};S.layout=l.a},QG3H:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/service-providers",function(){return n("ErPE")}])}},[["QG3H",1,0,4,6,2,3,5,7,9,10,23]]]);