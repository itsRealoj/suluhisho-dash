_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[36],{"323G":function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/add-user",function(){return n("j4cp")}])},j4cp:function(e,a,n){"use strict";n.r(a);var t=n("nKUr"),o=n("vJKn"),l=n.n(o),s=n("rg98"),r=n("q1tI"),i=n("Ktyj"),c=n("JZFu"),u=(n("UGp+"),n("AaxA"),n("ATyU")),d=n("20a2"),h=n("KYPV"),m=n("i6E2"),j=n("i4t8"),b=n("mtPR"),f=n("um8N"),x=n("Kg+a"),p=n("A2So"),g=n("2zww"),C=n("UsYt"),O=n("5LSk");function v(){var e=Object(d.useRouter)(),a=Object(r.useState)(!1),n=a[0],o=a[1],m=Object(r.useState)(null),v=m[0],w=m[1],T=Object(r.useState)(null),P=T[0],W=(T[1],Object(r.useState)(0)),D=(W[0],W[1]),N=Object(h.a)({initialValues:{firstname:"",lastname:"",phone:"",email:"",location:"",county:"",subCounty:"",category:"",categoryID:"",nationalID:"",profession:"",isActive:!0,isAdmin:!1,isClient:!1,isOccupied:!1,position:{},latitude:"",longitude:""},onSubmit:function(e){e.name="".concat(e.firstname," ").concat(e.lastname),P&&Object(s.a)(l.a.mark((function a(){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,_();case 2:e.profilePicture=v;case 3:case"end":return a.stop()}}),a)})))(),A(e)}}),_=function(){var e=P,a=c.a.storage().ref().child("profile_pics/"+e.name).put(e);a.on(c.a.storage.TaskEvent.STATE_CHANGED,(function(e){var a=100*Math.round(e.bytesTransferred/e.totalBytes);D(a)}),(function(e){throw e}),(function(){a.snapshot.ref.getDownloadURL().then((function(e){w(e),console.log("download url: ",e)}))}))},A=function(){var a=Object(s.a)(l.a.mark((function a(n){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:i.c.collection("users").add(n).then((function(){alert("New user created!")})).then((function(){e.push("users")})).catch((function(e){console.log("could not create User...",e)}));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(r.useEffect)((function(){i.a.onAuthStateChanged(function(){var a=Object(s.a)(l.a.mark((function a(n){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n?o(!0):e.push("../login");case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()),console.log("storage ref: ",c.a.storage().ref())}),[]),n?Object(t.jsx)(u.a.main,{variants:{hidden:{opacity:.5,scale:1.1,y:10},visible:{y:0,opacity:1,scale:1,transition:{delay:0,duration:.5}}},initial:"hidden",animate:"visible",exit:"exit",children:Object(t.jsx)("div",{children:Object(t.jsx)("form",{onSubmit:N.handleSubmit,children:Object(t.jsx)(b.a,{children:Object(t.jsx)(j.a,{xs:12,sm:12,md:8,children:Object(t.jsxs)(p.a,{children:[Object(t.jsx)(g.a,{color:"dark",children:Object(t.jsx)("h4",{className:y.cardTitleWhite,children:"Add A New User"})}),Object(t.jsxs)(C.a,{children:[Object(t.jsxs)(b.a,{children:[Object(t.jsx)(j.a,{xs:12,sm:12,md:6,children:Object(t.jsx)(f.a,{labelText:"First Name:",id:"firstname",name:"firstname",onChange:N.handleChange,value:N.values.firstname,formControlProps:{fullWidth:!0}})}),Object(t.jsx)(j.a,{xs:12,sm:12,md:6,children:Object(t.jsx)(f.a,{labelText:"Last Name:",id:"lastname",name:"lastname",onChange:N.handleChange,value:N.values.lastname,formControlProps:{fullWidth:!0}})}),Object(t.jsx)(j.a,{xs:12,sm:12,md:6,children:Object(t.jsx)(f.a,{labelText:"Email:",id:"email",name:"email",onChange:N.handleChange,value:N.values.email,formControlProps:{fullWidth:!0}})}),Object(t.jsx)(j.a,{xs:12,sm:12,md:6,children:Object(t.jsx)(f.a,{labelText:"Phone:",id:"phone",name:"phone",onChange:N.handleChange,value:N.values.phone,formControlProps:{fullWidth:!0}})}),Object(t.jsx)(j.a,{xs:12,sm:12,md:6,children:Object(t.jsx)(f.a,{id:"county",name:"county",onChange:N.handleChange,value:N.values.county,placeholder:N.values.county,labelText:"County:",formControlProps:{fullWidth:!0}})}),Object(t.jsx)(j.a,{xs:12,sm:12,md:6,children:Object(t.jsx)(f.a,{id:"subCounty",name:"subCounty",onChange:N.handleChange,value:N.values.subCounty,placeholder:N.values.subCounty,labelText:"Sub-County:",formControlProps:{fullWidth:!0}})})]}),Object(t.jsxs)(b.a,{children:[Object(t.jsx)(j.a,{xs:12,sm:12,md:6,children:Object(t.jsx)(f.a,{labelText:"Category:",id:"category",name:"category",onChange:N.handleChange,value:N.values.category,formControlProps:{fullWidth:!0}})}),Object(t.jsx)(j.a,{xs:12,sm:12,md:6,children:Object(t.jsx)(f.a,{labelText:"Category ID:",id:"categoryID",name:"categoryID",onChange:N.handleChange,value:N.values.categoryID,formControlProps:{fullWidth:!0}})}),Object(t.jsx)(j.a,{xs:12,sm:12,md:6,children:Object(t.jsx)(f.a,{id:"nationalID",name:"nationalID",onChange:N.handleChange,value:N.values.nationalID,placeholder:N.values.nationalID,labelText:"National ID or Passport No.",formControlProps:{fullWidth:!0}})}),Object(t.jsx)(j.a,{xs:12,sm:12,md:6,children:Object(t.jsx)(f.a,{id:"profession",name:"profession",onChange:N.handleChange,value:N.values.profession,placeholder:N.values.profession,labelText:"Profession",formControlProps:{fullWidth:!0}})}),Object(t.jsx)(j.a,{xs:12,sm:12,md:6,children:Object(t.jsx)(f.a,{id:"latitude",name:"latitude",onChange:N.handleChange,value:N.values.latitude,placeholder:N.values.latitude,labelText:"Location - Latitude",formControlProps:{fullWidth:!0}})}),Object(t.jsx)(j.a,{xs:12,sm:12,md:6,children:Object(t.jsx)(f.a,{id:"longitude",name:"longitude",onChange:N.handleChange,value:N.values.longitude,placeholder:N.values.longitude,labelText:"Location - Longitude",formControlProps:{fullWidth:!0}})}),Object(t.jsx)(j.a,{xs:12,sm:12,md:6,children:Object(t.jsx)(f.a,{labelText:"Location/Address:",id:"location",name:"location",onChange:N.handleChange,value:N.values.location,formControlProps:{fullWidth:!0}})})]})]}),Object(t.jsxs)(O.a,{children:[Object(t.jsx)(x.a,{type:"submit",color:"primary",children:"Create User"}),Object(t.jsx)(x.a,{color:"primary",onClick:function(){e.push("users")},children:"exit"})]})]})})})})})}):null}var y={cardTitleWhite:{color:"#FFFFFF",marginTop:"0px",minHeight:"auto",fontWeight:"300",fontFamily:"'Roboto', 'Helvetica', 'Arial', sans-serif",marginBottom:"3px",textDecoration:"none"}};v.layout=m.a,a.default=v}},[["323G",1,0,4,6,19,2,3,5,7,8,9,18,11,24]]]);