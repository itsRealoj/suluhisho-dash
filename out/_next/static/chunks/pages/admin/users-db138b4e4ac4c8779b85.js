_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[49],{Co4N:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users",function(){return n("MSll")}])},MSll:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return E}));var a=n("nKUr"),c=n("vJKn"),r=n.n(c),i=n("rg98"),o=n("q1tI"),s=n("Ktyj"),u=n("R/WZ"),l=n("i6E2"),d=n("ATyU"),h=n("wb2y"),f=n("ELmG"),j=n("kKAo"),p=n("Z3vd"),b=n("i4t8"),m=n("mtPR"),x=n("3T+C"),O=n("A2So"),v=n("2zww"),g=n("UsYt"),w=n("0gE4"),y=n("ZPUK"),C=n("20a2"),S=n("H6uU");function E(){var e=Object(u.a)(P)(),t=Object(C.useRouter)(),n=Object(o.useState)([]),c=n[0],l=n[1],E=Object(o.useState)(null),_=E[0],N=E[1],k=Object(o.useState)(0),A=k[0],T=k[1],U=Object(o.useState)(10),F=U[0],W=U[1],B=Object(o.useState)(0),D=B[0],H=B[1],K=Object(o.useState)(!1),R=K[0],z=K[1],I=Object(o.useState)(!1),J=I[0],L=I[1],M=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],L(!0),s.c.collection("users").orderBy("name").startAfter(_).limit(F).get().then((function(e){e.forEach((function(n){var a=n.data();a.id=n.id,t.push(a),N(e.docs[e.docs.length-1])}))})).then((function(){L(!1),l(t)})).catch((function(e){console.error(e),L(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],L(!0),s.c.collection("users").orderBy("name").endBefore(_).limit(F).get().then((function(e){e.forEach((function(n){var a=n.data();a.id=n.id,t.push(a),N(e.docs[e.docs.length-1])}))})).then((function(){L(!1),l(t)})).catch((function(e){console.error(e),L(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L(!0),t=[],s.c.collection("users").orderBy("name").limit(F).get().then((function(e){e.forEach((function(n){var a=n.data();a.id=n.id,t.push(a),N(e.docs[e.docs.length-1])}))})).then((function(){L(!1),l(t)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(i.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L(!1),n=[],s.c.collection("users").limit(F).get().then((function(e){e.forEach((function(e){var a,c=e.data();c.id=e.id,null!==(a=c.name)&&void 0!==a&&a.toLowerCase().includes(t)&&n.push(c)}))})).then((function(){L(!1),l(n)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){X(),s.c.collection("users").get().then((function(e){H(e.size)})),s.a.onAuthStateChanged(function(){var e=Object(i.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n?z(!0):t.push("../login");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),R?Object(a.jsx)(d.a.main,{variants:{hidden:{opacity:.5,scale:1.1,y:10},visible:{y:0,opacity:1,scale:1,transition:{delay:0,duration:.5}}},initial:"hidden",animate:"visible",exit:"exit",children:Object(a.jsx)(m.a,{children:Object(a.jsx)(b.a,{xs:12,sm:12,md:12,children:Object(a.jsxs)(O.a,{children:[Object(a.jsx)(v.a,{children:Object(a.jsxs)(m.a,{children:[Object(a.jsxs)(b.a,{xs:12,sm:12,md:10,children:[Object(a.jsx)("h4",{className:e.cardTitleWhite,children:"Users"}),Object(a.jsx)("p",{className:e.cardCategoryWhite,children:"View and Manage all users."})]}),Object(a.jsx)(b.a,{xs:12,sm:12,md:2,children:Object(a.jsx)(p.a,{variant:"contained",onClick:function(){return t.push("add-user")},children:"Add User"})})]})}),Object(a.jsx)(h.a,{}),J?Object(a.jsx)(S.a,{}):null,Object(a.jsxs)(g.a,{children:[Object(a.jsx)(m.a,{children:Object(a.jsx)(b.a,{xs:12,sm:12,md:6,children:Object(a.jsx)(w.a,{handleSearch:function(e){e.preventDefault();var t=e.target.value.toLowerCase();q(t)}})})}),Object(a.jsx)(j.a,{style:e.root,children:Object(a.jsx)(x.a,{tableHeaderColor:"primary",tableHead:["Name","Phone","NationalID","Email","County","Sub-County","Profile Pic","Action"],tableData:c.map((function(e){return[e.name,e.phone,e.nationalID,e.email,e.county,e.subCounty,e.profilePicture,Object(a.jsx)(y.a,{userData:e,fetchUsers:X})]}))})})]}),Object(a.jsxs)(m.a,{children:[Object(a.jsx)(b.a,{xs:12,sm:12,md:10,container:!0,justify:"center",children:Object(a.jsx)(f.a,{component:"div",count:D,page:A,onPageChange:function(e,t){t>A?M():Z(),T(t)},rowsPerPage:F,onRowsPerPageChange:function(e){W(parseInt(e.target.value,10)),T(0),X()}})}),Object(a.jsx)(b.a,{xs:12,sm:12,md:2,container:!0})]})]})})})}):null}var P={cardCategoryWhite:{"&,& a,& a:hover,& a:focus":{color:"#434444",margin:"0",fontSize:"14px",marginTop:"0",marginBottom:"0"},"& a,& a:hover,& a:focus":{color:"#FFFFFF"}},cardTitleWhite:{color:"#434444",marginTop:"0px",minHeight:"auto",fontWeight:"500",fontFamily:"'Roboto', 'Helvetica', 'Arial', sans-serif",marginBottom:"3px",textDecoration:"none","& small":{color:"#777",fontSize:"65%",fontWeight:"400",lineHeight:"1"}},pagination:{padding:"10px"}};E.layout=l.a}},[["Co4N",1,0,4,6,2,3,5,7,9,10,23]]]);